# Wallet Manager
## Where to find the App
### API
#### Dockerhub
You can find the API on [Docker Hub](https://hub.docker.com/r/jaredosuna/wallet_manager_api) or running `docker pull jaredosuna/wallet_manager_api`
### WEBAPP
#### Dockerhub
You can find the WEBAPP on [Docker Hub](https://hub.docker.com/r/jaredosuna/wallet_manager_webapp) or running `docker pull jaredosuna/wallet_manager_webapp`
### Repository
You can find the code for both, WEBAPP and API on [GitHub](https://github.com/EleazarLopezOsuna/WalletManager)
### Live version
You can use the live version [Here](http://35.193.158.175/)
The login credentials are
```javascript
email: jaredtl023@gmail.com
password: 1234
```
## Database
* MySQL
![Model](https://drive.google.com/uc?export=view&id=1XN9uIYXlC2L9r2nn_bVYEyQDONBmTp2y)
## Backend
### Technologies
* Ruby
* Ruby on Rails
### Routes
The next set of routes does not contains the routes generated by running the command `resources :<id>`
#### api
##### transaction
* /my_transactions/:user_id
* /wallet_transactions/:wallet_id
* /date/:wallet_id/:date
* /month/:wallet_id/:month
* /year/:wallet_id/:year
* /category/:wallet_id/:category
* /report/:wallet_id
##### wallet
* /my_wallets/:user_id
* /user/summary/:user_id
##### user
* login
* register
## Frontend
### Technologies
* React.js
### Screenshots
#### Login
![Login](https://drive.google.com/uc?export=view&id=16ki9kDzA0vQyozmZj7glGppAxLgoL5VR)
#### Landing
![Landing](https://drive.google.com/uc?export=view&id=11UoAtPqVbXNu_QU1NgMys2nPip46prRb)
#### Wallets
![Wallets](https://drive.google.com/uc?export=view&id=1LNsjewsnMtNDRMUCp0ygNnlTroKy3PZs)
#### Transactions
![Transactions](https://drive.google.com/uc?export=view&id=1SjGdO79AExuDZyW03-XBE_K-1vi0R9nY)
#### New Transaction
![New_Transaction](https://drive.google.com/uc?export=view&id=1IVXk3VyXrUzuLWmGrDQaxQ6cD9F-HP5b)
#### Reports
![Report1](https://drive.google.com/uc?export=view&id=1qGdsFqhZUrXJeUxc1OvOecnBoOczGk0x)
![Report2](https://drive.google.com/uc?export=view&id=1rz99V90XTGp15AbrdaRA7uIpV8f1-D6c)
![Report3](https://drive.google.com/uc?export=view&id=1LHrlgA4fSy5JtWIwib6KgozhpWvpAO4M)
#### Check Login
![Check_Login](https://drive.google.com/uc?export=view&id=12dzsC4CD6fv_negboVikdUNJHNwGZrdT)
#### Check Credentials
![Check_Credentials](https://drive.google.com/uc?export=view&id=130cFdZkA7wakhEsV7EjYGUI2srcZPZhj)
#### Check Fields
![Check_Fields](https://drive.google.com/uc?export=view&id=1TVp4V_0Y20EY1W-NDR-q_DjFglWGTAz1)
## Deployment
### Technologies
* Docker
* Docker compose
* Nginx
* GCP Compute Engine
### Files
#### Backend Dockerfile
```Dockerfile
FROM ruby:2.7.2-alpine
RUN apk update
RUN apk add nodejs yarn

RUN apk update && apk add --update --no-cache --virtual build-dependency build-base ruby-dev mysql-dev postgresql-dev git sqlite-dev imagemagick-dev curl openssh openssl tzdata make bash

RUN gem install bundler:2.1.4
RUN apk add --no-cache build-base

RUN gem install mysql2
RUN gem install ffi
RUN gem install nokogiri

RUN mkdir /usr/src/demo
WORKDIR /usr/src/demo
ADD Gemfile /usr/src/demo/Gemfile
ADD Gemfile.lock /usr/src/demo/Gemfile.lock
RUN bundle install
ADD . /usr/src/demo

ENV RAILS_ENV='production'
ENV RACK_ENV='production'
ENV PORT 3000

ENV SECRET_KEY_BASE=f9e612c0c13733da9cd8d3b5a90e4410b039526ae8f407734070aa99e15c9cd3d87380622c502f85883468ff18ee1ed72f6482b70022b220e08d8572b0e68c0e
RUN RAILS_ENV=production bin/rails assets:precompile

EXPOSE 3000
CMD ["bundle", "exec", "puma", "-C", "config/puma.rb"]
```
#### Frontent Multi-stage Dockerfile
```Dockerfile
FROM node:16.15-alpine AS builder
ENV NODE_ENV production

WORKDIR /app

COPY package.json .
RUN npm install

COPY . .

RUN npm run build

FROM nginx:1.21.0-alpine as production
ENV NODE_ENV production

COPY --from=builder /app/build /usr/share/nginx/html

COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```
#### Docker compose
```yml
version: "3.9"
services:
  app:
    container_name: app
    image: jaredosuna/wallet_manager_api:latest
    depends_on:
      - db
    volumes:
      - .:/curso-rails
    ports:
      - "3000:3000"
    environment:
      - DB_HOST=localhost
      - DB_NAME=wallet_manager
      - DB_USERNAME=root
      - DB_PASSWORD=root
      - RAILS_SERVE_STATIC_FILES=true
    restart: always
  web:
    container_name: web
    image: jaredosuna/wallet_manager_webapp:latest
    depends_on:
      - app
    ports:
      - "80:80"
    environment:
      - REACT_APP_API_ROUTE="http://35.193.158.175:3000/api/"
    restart: always
  db:
    image: mysql:latest
    command: --default-authentication-plugin=mysql_native_password
    ports:
      - "3306:3306"
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
volumes:
  db:
   app:
volumes:
  db-data:
    driver: local
```